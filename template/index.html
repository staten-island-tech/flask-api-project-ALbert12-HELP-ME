<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Recipe Search</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <h1>Search for Recipes</h1>
        <form id="searchForm">
            <input type="text" name="q" placeholder="e.g., pasta, chicken" required>
            <select name="diet">
                <option value="">Select Diet</option>
                <option value="low-carb">Low-Carb</option>
                <option value="high-protein">High-Protein</option>
            </select>
            <select name="cuisineType">
                <option value="">Select Cuisine</option>
                <option value="italian">Italian</option>
                <option value="chinese">Chinese</option>
            </select>
            <button type="submit">Search</button>
        </form>

        <div id="results"></div>
    </div>

    <script>
        const form = document.getElementById('searchForm');
        const resultsDiv = document.getElementById('results');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(form);
            const query = new URLSearchParams(formData).toString();

            const res = await fetch(`/search?${query}`);
            const data = await res.json();

            resultsDiv.innerHTML = '';
            if (data.hits) {
                data.hits.forEach(hit => {
                    const recipe = hit.recipe;
                    resultsDiv.innerHTML += `
                        <div class="recipe">
                            <h3>${recipe.label}</h3>
                            <img src="${recipe.image}" alt="${recipe.label}">
                            <p><a href="${recipe.url}" target="_blank">View Recipe</a></p>
                        </div>
                    `;
                });
            } else {
                resultsDiv.innerHTML = `<p>No results found.</p>`;
            }
        });
    </script>
</body>
</html>
